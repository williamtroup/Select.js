"use strict";var Is,Trigger,Constants,Default2,DomElement,DomElement2,Binding,Config;(e=>{function t(e){return null!=e&&""!==e.toString()}function n(e){return t(e)&&"object"==typeof e}e.defined=t,e.definedObject=n,e.definedBoolean=function(e){return t(e)&&"boolean"==typeof e},e.definedString=function(e){return t(e)&&"string"==typeof e},e.definedFunction=function(e){return t(e)&&"function"==typeof e},e.definedNumber=function(e){return t(e)&&"number"==typeof e},e.definedArray=function(e){return n(e)&&e instanceof Array}})(Is||(Is={})),(Trigger||(Trigger={})).customEvent=function(e,...t){Is.definedFunction(e)&&e.apply(null,[].slice.call(t,0))},(Constants||(Constants={})).SELECT_JS_ATTRIBUTE_NAME="data-select-js",(Default=>{function getString(e,t){return Is.definedString(e)?e:t}function getBoolean(e,t){return Is.definedBoolean(e)?e:t}function getNumber(e,t){return Is.definedNumber(e)?e:t}function getFunction(e,t){return Is.definedFunction(e)?e:t}function getArray(e,t){return Is.definedArray(e)?e:t}function getObject(e,t){return Is.definedObject(e)?e:t}function getStringOrArray(e,t){let n=t;if(Is.definedString(e)){const o=e.toString().split(" ");0===o.length?e=t:n=o}else n=getArray(e,t);return n}function getObjectFromString(objectString,configuration){const result={parsed:!0,object:null};try{Is.definedString(objectString)&&(result.object=JSON.parse(objectString))}catch(e1){try{result.object=eval(`(${objectString})`),Is.definedFunction(result.object)&&(result.object=result.object())}catch(e){configuration.safeMode||(console.error("Errors in object: "+e1.message+", "+e.message),result.parsed=!1),result.object=null}}return result}Default.getString=getString,Default.getBoolean=getBoolean,Default.getNumber=getNumber,Default.getFunction=getFunction,Default.getArray=getArray,Default.getObject=getObject,Default.getStringOrArray=getStringOrArray,Default.getObjectFromString=getObjectFromString})(Default2||(Default2={})),DomElement2=DomElement||(DomElement={}),DomElement2.create=function(e,t=""){const n=e.toLowerCase();let o="text"===n?document.createTextNode(""):document.createElement(n);return Is.defined(t)&&(o.className=t),o},DomElement2.cancelBubble=function(e){e.preventDefault(),e.stopPropagation()},(e=>{let t;var n;(n=t=e.Options||(e.Options={})).getForNewInstance=function(t,n){const o=e.Options.get(t);return o._currentView={},o._currentView.element=n,o},n.get=function(e){let t=Default2.getObject(e,{});return t.render=Default2.getBoolean(t.render,!0),t.dropDownShowDelay=Default2.getNumber(t.dropDownShowDelay,50),t.showDropDownButton=Default2.getBoolean(t.showDropDownButton,!0),t=function(e){return e.removeText=Default2.getString(e.removeText,"X"),e.noItemsSelectedText=Default2.getString(e.noItemsSelectedText,"There are no items selected"),e}(t),t=function(e){return e.onRenderComplete=Default2.getFunction(e.onRenderComplete,null),e.onSelectedItemsChanged=Default2.getFunction(e.onSelectedItemsChanged,null),e.onDropDownShow=Default2.getFunction(e.onDropDownShow,null),e.onDropDownHide=Default2.getFunction(e.onDropDownHide,null),e}(t),t}})(Binding||(Binding={})),(e=>{let t;(t=e.Options||(e.Options={})).get=function(e=null){let t=Default2.getObject(e,{});return t.safeMode=Default2.getBoolean(t.safeMode,!0),t.domElementTypes=Default2.getStringOrArray(t.domElementTypes,["select"]),t}})(Config||(Config={})),(()=>{let e={},t=[];function n(n){let r=!0;if(Is.defined(n)&&n.hasAttribute(Constants.SELECT_JS_ATTRIBUTE_NAME)){const l=n.getAttribute(Constants.SELECT_JS_ATTRIBUTE_NAME);if(Is.definedString(l)){const d=Default2.getObjectFromString(l,e);if(d.parsed&&Is.definedObject(d.object)){const e=Binding.Options.getForNewInstance(d.object,n);if(e.render){n.removeAttribute(Constants.SELECT_JS_ATTRIBUTE_NAME);const r=function(e){const t=e.parentNode,n=t.children,o=n.length;let r=null,i=!1;for(let t=0;t<o;t++){const o=n[t];if(i){r=o;break}o===e&&(i=!0)}const l=DomElement.create("div","select-js");Is.defined(r)?t.insertBefore(l,r):t.appendChild(l);return t.removeChild(e),l.appendChild(e),l}(n),l=function(e,n,o){const r=DomElement.create("div","control");e.appendChild(r);const i=DomElement.create("div","drop-down");i.style.display="none",e.appendChild(i);const l={control:r,dropDown:i,select:n,bindingOptions:o,multiSelectEnabled:n.hasAttribute("multiple")};o.showDropDownButton||(r.onclick=()=>c(l));return t.push(l),l}(r,n,e);o(l),i(l,!1),function(e){const t=()=>s(e);document.body.addEventListener("click",t),window.addEventListener("resize",t),window.addEventListener("click",t)}(l),Trigger.customEvent(e.onRenderComplete,e._currentView.element)}}else e.safeMode||(console.error(`The attribute '${Constants.SELECT_JS_ATTRIBUTE_NAME}' is not a valid object.`),r=!1)}else e.safeMode||(console.error(`The attribute '${Constants.SELECT_JS_ATTRIBUTE_NAME}' has not been set correctly.`),r=!1)}return r}function o(e){const t=e.select.options.length;e.dropDown.innerHTML="";for(let n=0;n<t;n++)r(e,n)}function r(e,t){const n=DomElement.create("div","item"),o=e.select.options[t];n.innerHTML=o.text,e.dropDown.appendChild(n),o.selected&&n.classList.add("selected"),n.onclick=o=>{if(DomElement.cancelBubble(o),!e.multiSelectEnabled){const t=e.select.options.length;for(let n=0;n<t;n++)e.select.options[n].selected=!1}e.select.options[t].selected=!e.select.options[t].selected,e.select.options[t].selected?n.className="item selected":n.className="item",i(e),e.multiSelectEnabled||s(e)}}function i(e,t=!0){const n=e.select.options,o=n.length;let r=!1;e.control.innerHTML="",function(e){if(e.bindingOptions.showDropDownButton){const t=DomElement.create("div","button");e.control.appendChild(t),d(e)&&t.classList.add("button-open"),t.onclick=()=>c(e)}}(e);for(let t=0;t<o;t++){n[t].selected&&(r=!0,l(e,t))}if(!r){const t=DomElement.create("div","no-items-selected");t.innerHTML=e.bindingOptions.noItemsSelectedText,e.control.appendChild(t)}t&&Trigger.customEvent(e.bindingOptions.onSelectedItemsChanged,function(e){const t=e.select.options,n=t.length,o=[];for(let e=0;e<n;e++){const n=t[e];n.selected&&o.push(n.value)}return o}(e))}function l(e,t){const n=DomElement.create("div","selected-item");e.control.appendChild(n);const o=DomElement.create("span","text");if(o.innerHTML=e.select.options[t].text,n.appendChild(o),e.multiSelectEnabled){const o=DomElement.create("div","remove");o.innerHTML=e.bindingOptions.removeText,n.appendChild(o),o.onclick=n=>{DomElement.cancelBubble(n),e.select.options[t].selected=!1,s(e),i(e)}}}function c(e){d(e)?s(e):setTimeout((function(){e.dropDown.style.display="block",o(e),i(e,!1),Trigger.customEvent(e.bindingOptions.onDropDownShow)}),e.bindingOptions.dropDownShowDelay)}function s(e){null!==e.dropDown&&"none"!==e.dropDown.style.display&&(e.dropDown.style.display="none",i(e,!1),Trigger.customEvent(e.bindingOptions.onDropDownHide))}function d(e){return null!==e.dropDown&&"block"===e.dropDown.style.display}function u(e){"Escape"===e.code&&(e.preventDefault(),function(){const e=t.length;for(let n=0;n<e;n++)s(t[n])}())}const a={setConfiguration:function(t){if(Is.definedObject(t)){let n=!1;const o=e;for(let r in t)t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&o[r]!==t[r]&&(o[r]=t[r],n=!0);n&&(e=Config.Options.get(o))}return a},getVersion:function(){return"1.1.0"}};e=Config.Options.get(),document.addEventListener("DOMContentLoaded",(function(){!function(){const t=e.domElementTypes,o=t.length;for(let e=0;e<o;e++){const o=document.getElementsByTagName(t[e]),r=[].slice.call(o),i=r.length;for(let e=0;e<i&&n(r[e]);e++);}}(),function(e=!0){(e?document.addEventListener:document.removeEventListener)("keydown",u)}()})),Is.defined(window.$select)||(window.$select=a)})();